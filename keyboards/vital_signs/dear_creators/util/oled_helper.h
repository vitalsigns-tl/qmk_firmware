#include "quantum.h"
#include <oled_driver.h>

#define CONTENT_MARGIN 4

#define LAYER_FONT_WIDTH 16
#define LAYER_FONT_HEIGHT 21

#define LAYER_ICON_WIDTH 32
#define LAYER_ICON_HEIGHT 32

#define OS_LABEL_WIDTH 32
#define OS_LABEL_HEIGHT 10

enum OS
{
    Undefined,
    Win,
    Mac,
    iPad,
};

void render_oled_contents(uint8_t layer_state);
void render_logo(void);
void render_layer_state(uint8_t layer_state, uint8_t x, uint8_t y);
void render_icon(uint8_t layer_state, uint8_t x, uint8_t y);

static const char PROGMEM vs_logo[] = {
    0x80, 0x81, 0x82, 0x83, 0x84,
    0xA0, 0xA1, 0xA2, 0xA3, 0xA4,
    0xC0, 0xC1, 0xC2, 0xC3, 0xC4, 0x00
};

static const uint32_t PROGMEM os_labels[][OS_LABEL_HEIGHT] =
{
    // Win
    { 0x00003030, 0x00033030, 0x00033330, 0x03B03330, 0x07F33330, 0x06F33330, 0x06333FF0, 0x06331FE0, 0x06330CC0, 0x06330CC0 },
    // Mac
    { 0x00000C0C, 0x00000E1C, 0x0F1B8F3C, 0x1F9FCFFC, 0x19DCEDEC, 0x00D86CCC, 0x00D86CCC, 0x19DCECCC, 0x1F9FCCCC, 0x0F1B8CCC },
    // iPad
    { 0x300003F0, 0x300007F0, 0x371B8E36, 0x3F9FCC36, 0x39DCEE30, 0x30D867F6, 0x30D863F6, 0x39DCE036, 0x3F9FC036, 0x371B8036 }
};

static const uint16_t PROGMEM layer_fonts[][LAYER_FONT_HEIGHT] =
{
    // 0
    { 0x0FF0, 0x1FF8, 0x381C, 0x700E, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x700E, 0x381C, 0x1FF8, 0x0FF0 },
    // 1
    { 0x0180, 0x0180, 0x01F0, 0x01F0, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x3FFC, 0x3FFC },
    // 2
    { 0x0FF0, 0x1FF8, 0x381C, 0x300C, 0x700E, 0x6006, 0x6006, 0x7006, 0x3000, 0x3800, 0x1C00, 0x0E00, 0x0700, 0x0380, 0x01C0, 0x00E0, 0x0070, 0x0038, 0x001C, 0x7FFE, 0x7FFE },
    // 3
    { 0x0FF0, 0x1FF8, 0x381C, 0x300C, 0x700E, 0x6006, 0x6006, 0x6006, 0x7000, 0x3FC0, 0x1FC0, 0x3000, 0x7000, 0x6006, 0x6006, 0x6006, 0x700E, 0x300C, 0x381C, 0x1FF8, 0x0FF0 },
    // 4
    { 0x0700, 0x0780, 0x0780, 0x07C0, 0x06C0, 0x06E0, 0x0660, 0x0670, 0x0630, 0x0638, 0x0618, 0x061C, 0x060C, 0x7FFE, 0x7FFE, 0x0600, 0x0600, 0x0600, 0x0600, 0x0600, 0x0600 },
    // 5
    { 0x3FFE, 0x3FFE, 0x0006, 0x0006, 0x0006, 0x0006, 0x0006, 0x0006, 0x0FF6, 0x1FFE, 0x381E, 0x300E, 0x7006, 0x6000, 0x6000, 0x6006, 0x700E, 0x300C, 0x381C, 0x1FF8, 0x0FF0 },
    // 6
    { 0x0FF0, 0x1FF8, 0x381C, 0x700C, 0x600E, 0x6006, 0x0006, 0x0006, 0x0FF6, 0x1FFE, 0x381E, 0x300E, 0x700E, 0x6006, 0x6006, 0x6006, 0x700E, 0x300C, 0x381C, 0x1FF8, 0x0FF0 },
    // 7
    { 0x7FFE, 0x7FFE, 0x6006, 0x6006, 0x7000, 0x3800, 0x1C00, 0x0C00, 0x0E00, 0x0600, 0x0600, 0x0700, 0x0300, 0x0300, 0x0300, 0x0380, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180 },
    // 8
    { 0x0FF0, 0x1FF8, 0x381C, 0x300C, 0x300C, 0x300C, 0x381C, 0x1C38, 0x0FF0, 0x1FF8, 0x381C, 0x300C, 0x700E, 0x6006, 0x6006, 0x6006, 0x700E, 0x300C, 0x381C, 0x1FF8, 0x0FF0 },
    // 9
    { 0x0FF0, 0x1FF8, 0x381C, 0x300C, 0x700E, 0x6006, 0x6006, 0x6006, 0x700E, 0x700C, 0x781C, 0x7FF8, 0x6FF0, 0x6000, 0x6000, 0x6006, 0x7006, 0x300E, 0x381C, 0x1FF8, 0x0FF0 }
};

static const uint32_t PROGMEM layer_icons[][LAYER_ICON_HEIGHT] =
{
    // CLIP STUDIO
    { 0x00000000, 0x00000000, 0x001F0000, 0x00FFE000, 0x03FFFC00, 0x07FFFF00, 0x0FFFFFC0, 0x1FC07FF0, 0x1F001FF8, 0x3E0007F8, 0x3E0E00FC, 0x7C0F807C, 0x7C1FF07C, 0x7C1FFCFC, 0x7E0FFFF8, 0x7E03FFF8, 0x3F007FF0, 0x3FC01FC0, 0x1FF00000, 0x0FFC0000, 0x07FF8000, 0x01FFE000, 0x007FF800, 0x001FF000, 0x0007E000, 0x000FE000, 0x000FC000, 0x001F8000, 0x001F8000, 0x000F0000, 0x00000000, 0x00000000 },
    // SAI
    { 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x000FE000, 0x007FFC00, 0x00F01E00, 0x038EE380, 0x073EF9C0, 0x0E3EF8E0, 0x0C9EF260, 0x19CEE730, 0x19E6CF84, 0x33F6DF8E, 0x33FABE38, 0x37FC78F0, 0x300103C0, 0x37FE8F18, 0x37FD3C58, 0x37F8F1D8, 0x3BE3C7B8, 0x1B8F1330, 0x183C7830, 0x08F0FE60, 0x03C6FCE0, 0x0F1EF9C0, 0x3C0EE780, 0x30F01E00, 0x407FFC00, 0x000FE000, 0x00000000, 0x00000000 },
    // Maya
    { 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x0FE00FE0, 0x1FE00FF0, 0x1FF01FF0, 0x1FF01FF0, 0x1FF01FF0, 0x1FF83FF0, 0x1FF83FF0, 0x1FF83FF0, 0x1FFC7FF0, 0x1FFC7FF0, 0x1FFC7FF0, 0x1FBEFBF0, 0x1FBEFBF0, 0x1FBEFBF0, 0x1F9FF3F0, 0x1F9FF3F0, 0x1F8FE3F0, 0x1F8FE3F0, 0x1F87C3F0, 0x1F87C3F0, 0x1F8003F0, 0x1F8003F0, 0x0F0001E0, 0x00000000, 0x00000000, 0x00000000, 0x00000000 },
    // Blender
    { 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00070000, 0x000F0000, 0x001E0000, 0x00FC0000, 0x03FF0000, 0x0FFFFF80, 0x1FFFFFC0, 0x1FCFFF80, 0x3F03F000, 0x3C30F800, 0x3CFCFC00, 0x79FE7F00, 0x79FE7F80, 0x79FE7FC0, 0x79FE7BE0, 0x79FE79F0, 0x7CFCF8F8, 0x3C30F07C, 0x3F03F03C, 0x1FCFE01C, 0x1FFFE000, 0x07FF8000, 0x03FF0000, 0x00780000, 0x00000000, 0x00000000, 0x00000000 },
    // Illustrator
    { 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00003800, 0x00003800, 0x06007C00, 0x0F007C00, 0x0F00FE00, 0x0600FE00, 0x0000FE00, 0x0001EF00, 0x0F01C700, 0x0F01C700, 0x0F03C780, 0x0F038380, 0x0F0783C0, 0x0F07FFC0, 0x0F07FFC0, 0x0F0FFFE0, 0x0F0FFFE0, 0x0F0F83E0, 0x0F1F01F0, 0x0F1F01F0, 0x0F1F01F0, 0x0F3E00F8, 0x0F3E00F8, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000 },
    // After Effects
    { 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000E00, 0x00000E00, 0x00001F00, 0x00001F00, 0x00003F80, 0x00003F80, 0x00003F80, 0x07807BC0, 0x1FE071C0, 0x1FE071C0, 0x3FF0F1E0, 0x3CF0E0E0, 0x7879E0F0, 0x7FF9FFF0, 0x7FF9FFF0, 0x3FFBFFF8, 0x007BFFF8, 0x007BE0F8, 0x78FFC07C, 0x7FF7C07C, 0x3FF7C07C, 0x1FEF803E, 0x078F803E, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000 },
    // Photo Shop
    { 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00001FF0, 0x00007FF0, 0x0000FFF0, 0x0001FFF0, 0x0003F0F0, 0x0003E0F0, 0x0003C0F0, 0x0FC3C0F0, 0x1FE3C0F0, 0x3FF3E0F0, 0x3CFBF0F0, 0x0079FFF0, 0x00F8FFF0, 0x03F87FF0, 0x0FF01FF0, 0x1FC000F0, 0x3E0000F0, 0x3C0000F0, 0x3E7800F0, 0x1FF800F0, 0x0FF000F0, 0x07E000F0, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000 },
    // Premiere Pro
    { 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x000000F0, 0x00003FF0, 0x0000FFF0, 0x0001FFF0, 0x0003FFF0, 0x0003F0F0, 0x0007E0F0, 0x0007C0F0, 0x3F87C0F0, 0x7FC7E0F0, 0x7FE3F0F0, 0x7FE3FFF0, 0x03E1FFF0, 0x01E0FFF0, 0x01E07FF0, 0x01E00FF0, 0x01E000F0, 0x01E000F0, 0x01E000F0, 0x01E000F0, 0x01E000F0, 0x01E000F0, 0x01E000F0, 0x01E000F0, 0x00000000, 0x00000000, 0x00000000, 0x00000000 },
    // Spade
    { 0x00000000, 0x00000000, 0x00000000, 0x00010000, 0x00038000, 0x00038000, 0x0007C000, 0x0007C000, 0x000FE000, 0x001FF000, 0x003FF800, 0x007FFC00, 0x00FFFE00, 0x01FFFF00, 0x03FFFF80, 0x07FFFFC0, 0x07FFFFC0, 0x0FFFFFE0, 0x0FFFFFE0, 0x0FFFFFE0, 0x0FFFFFE0, 0x0FFFFFE0, 0x07FFFFC0, 0x03FBBF80, 0x01F39F00, 0x0007C000, 0x0007C000, 0x000FE000, 0x000FE000, 0x001FF000, 0x00000000, 0x00000000 },
    // Heart
    { 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00F01F00, 0x03F83FC0, 0x07FC7FC0, 0x0FFEFFE0, 0x0FFFFFE0, 0x1FFFFFF0, 0x1FFFFFF0, 0x1FFFFFF0, 0x1FFFFFF0, 0x1FFFFFF0, 0x0FFFFFE0, 0x0FFFFFE0, 0x07FFFFC0, 0x07FFFFC0, 0x03FFFF80, 0x01FFFF00, 0x01FFFF00, 0x00FFFE00, 0x007FFC00, 0x003FF800, 0x001FF000, 0x000FE000, 0x0007C000, 0x00038000, 0x00000000, 0x00000000, 0x00000000, 0x00000000 },
    // Club
    { 0x00000000, 0x00000000, 0x00000000, 0x0007E000, 0x000FF000, 0x001FF800, 0x003FFC00, 0x007FFE00, 0x007FFE00, 0x007FFE00, 0x007FFE00, 0x003FFC00, 0x001FF800, 0x00FFFF00, 0x01FFFF80, 0x03FFFFC0, 0x07FFFFE0, 0x0FFFFFF0, 0x0FFFFFF0, 0x0FFFFFF0, 0x0FFFFFF0, 0x07FFFFE0, 0x07FFFFE0, 0x03FDBFC0, 0x01F99F80, 0x00018000, 0x0003C000, 0x0003C000, 0x0007E000, 0x00000000, 0x00000000, 0x00000000 },
    // Diamond
    { 0x00000000, 0x00000000, 0x00010000, 0x00010000, 0x00038000, 0x00038000, 0x0007C000, 0x0007E000, 0x000FE000, 0x001FF000, 0x003FF800, 0x003FFC00, 0x007FFC00, 0x00FFFE00, 0x01FFFF00, 0x07FFFFC0, 0x1FFFFFF0, 0x07FFFFC0, 0x01FFFF00, 0x00FFFE00, 0x007FFC00, 0x003FF800, 0x001FF000, 0x000FF000, 0x000FE000, 0x0007C000, 0x0007C000, 0x00038000, 0x00010000, 0x00010000, 0x00000000, 0x00000000 }
};
